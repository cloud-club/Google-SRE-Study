---
writer: jiwon
date: 2025-03-09
---

# Chapter 2 - The Production Environment at Google, from the Viewpoint of an SRE

## Summary
구글의 프로덕션 환경
- 구글은 여러 데이터센터 검물이 모여 캠퍼스를 이루고 있다.
- 구글의 데이터 센터 내의 머신들은 서로 통신이을 위해 수만 개의 포트로 이루어진 매우 빠른 가상 스위치를 사용하고 있다.
  - 구글이 직접 만든 수백 대의 스위치를 연결하여 주피터라는 close network fabric을 구성했다.
- 하드웨어는 소프트웨어에 의해 제어 및 관리되어야 한다.
  - 하드웨어의 결함은 비교적 잦은데, 이를 추상화하면 손쉽게 관리할 수 있다.

- 구글은 "보그"라는 쿠버네티스의 전신?같은 분산 클러스터 운영 시스템 SW를 사용한다.
  - 클러스터에서 job을 관리한다.
  - 태스크에 유동적으로 머신을 할당하면서 ip가 변동되고는 하는데, 이를 적절히 참조하기 위해 NS를 사용한다.
  - 태스크에 머신을 할당할 때는 실패 지점이 단일로 구성되지 않도록 유의하며 할당한다.

- 구글은 영구 저장소로 클러스터 저장소를 사용하는데, 오픈소스 기반의 러스터와 하둡 분산 시스템을 활용하고 있다.

- 구글의 글로벌 로드밸런서는 DNS, 서비스, RPC 수준에서 로드밸런싱 되도록 구성한다.

- 필요한 태스크의 최소 갯수를 계산하기 위해서는 태스크가 처리할 수 있는 QPS 값과, 사용자들이 발생시키는 최대 QPS 값을 구하여 계산하여야 한다.
  - 집단을 설정하여 직접 테스트하여햐 할 필요성이 있다.
- 실제로 사용할 때는 최소 태스크 갯수 + 2 정도의 태스크를 사용한다.
  - 업데이트 동안에 사용이 불가하거나, 장애 발생 상황이 있을 수 있기 때문
  - 추가적으로 구성하는 태스크 수는 리스크와 경제성 사이의 관계에 따라 달라질 수 있다.

## Questions


## Thoughts
어떠한 정책을 수립하거나, 서비스를 도입할 때에는 기본적으로 테스트를 기반으로 하여야 한다. 개인 프로젝트를 할 때는 간과하기 쉬운데 귀찮지만 필수적으로 해야하는 것이 테스트라고 생각한다.

## Difficulties
데이터 센터를 크게 설명해주어서 아직 동작 흐름이 명확하게 와닿지는 않는다. 기술을 좀 더 세부적으로 이해해야 할 필요가 있는 것 같다.

## References


## Discussion Topics
